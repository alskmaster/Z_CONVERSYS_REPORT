{% extends 'admin/base.html' %}
{% block title %}Gerenciar Usuários{% endblock %}
{% block admin_content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3 mb-0">Gerenciar Usuários</h1>
    <a href="{{ url_for('admin_add_user') }}" class="btn btn-primary"><i class="bi bi-plus-circle"></i> Novo Usuário</a>
</div>
<div class="card"><div class="card-body"><div class="table-responsive">
<table class="table table-hover align-middle">
<thead><tr><th>Usuário</th><th>Função</th><th>Ações</th></tr></thead>
<tbody>
{% for user in users %}
<tr><td>{{ user.username }}</td>
<td>{% if user.has_role('super_admin') %}<span class="badge bg-danger">Super Admin</span>
{% elif user.has_role('admin') %}<span class="badge bg-warning text-dark">Admin</span>
{% else %}<span class="badge bg-info">Cliente</span>{% endif %}</td>
<td>
<a href="{{ url_for('admin_edit_user', user_id=user.id) }}" class="btn btn-sm btn-outline-primary" title="Editar"><i class="bi bi-pencil"></i></a>
{% if user.id != current_user.id %}
<form method="POST" action="{{ url_for('admin_delete_user', user_id=user.id) }}" class="d-inline" onsubmit="return confirm('Tem certeza que deseja excluir o usuário {{ user.username }}?');">
<button type="submit" class="btn btn-sm btn-outline-danger" title="Excluir"><i class="bi bi-trash"></i></button></form>
{% endif %}</td></tr>
{% endfor %}</tbody></table></div></div></div>
{% endblock %}