{% extends 'admin/base.html' %}
{% block title %}Gerenciar Clientes{% endblock %}
{% block admin_content %}
<div class="d-flex justify-content-between align-items-center mb-4"><h1 class="h3 mb-0">Gerenciar Clientes</h1>
<a href="{{ url_for('admin_add_client') }}" class="btn btn-primary"><i class="bi bi-plus-circle"></i> Novo Cliente</a></div>
<div class="card"><div class="card-body"><div class="table-responsive">
<table class="table table-hover align-middle">
<thead><tr><th></th><th>Nome</th><th>Zabbix Group IDs</th><th>SLA Contratado (%)</th><th>Ações</th></tr></thead>
<tbody>
{% for client in clients %}
<tr>
<td>{% if client.logo_path %}<img src="{{ url_for('uploaded_file', filename=client.logo_path) }}" height="30" class="rounded border p-1">{% else %}<span class="text-muted small">Sem logo</span>{% endif %}</td>
<td><strong>{{ client.name }}</strong></td>
<td>
    {% for group in client.zabbix_groups %}
        <span class="badge bg-secondary">{{ group.zabbix_group_id }}</span>
    {% else %}
        <span class="text-muted small">Nenhum</span>
    {% endfor %}
</td>
<td>{{ client.sla_contract }}</td>
<td>
<a href="{{ url_for('admin_edit_client', client_id=client.id) }}" class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i></a>
<form method="POST" action="{{ url_for('admin_delete_client', client_id=client.id) }}" class="d-inline" onsubmit="return confirm('Tem certeza?');">
<button type="submit" class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button></form></td></tr>
{% endfor %}</tbody></table></div></div></div>
{% endblock %}